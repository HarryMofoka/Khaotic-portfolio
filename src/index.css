/* ==========================================================================
 * KHAOTIC Portfolio — Global Styles
 * ==========================================================================
 * This file contains all global CSS including:
 *   - TailwindCSS v4 import
 *   - Custom theme tokens (fonts, colors, animations)
 *   - Noise texture overlay
 *   - Custom cursor styles
 *   - Lenis smooth-scroll overrides
 *   - Film-card styling
 *   - Menu hover effects
 * ========================================================================== */

/* --------------------------------------------------------------------------
 * 1. TailwindCSS v4 — Core import
 * -------------------------------------------------------------------------- */
@import "tailwindcss";

/* --------------------------------------------------------------------------
 * 2. Custom Theme Tokens
 * --------------------------------------------------------------------------
 * We define design tokens via @theme so TailwindCSS utility classes (e.g.
 * `font-sans`, `text-accent`, `animate-blob`) map to our custom values.
 * -------------------------------------------------------------------------- */
@theme {
  --font-sans: "Inter", sans-serif;
  --font-display: "Rock Salt", cursive;
  --font-mono: "Inter", monospace;

  /* Theme-aware tokens (overridden by data-mood) */
  --color-bg: var(--bg, #050505);
  --color-surface: var(--surface, #0f0f0f);
  --color-accent: var(--accent, #ff3d00);
  --color-secondary: var(--secondary, #888888);
  --color-text: var(--text, #ffffff);
  --color-text-dim: var(--text-dim, rgba(255, 255, 255, 0.5));
  --color-border: var(--border, rgba(255, 255, 255, 0.1));

  --tracking-tighter: -0.04em;
  --tracking-tightest: -0.08em;

  --animate-blob: blob 15s infinite;

  @keyframes blob {
    0% {
      transform: translate(0px, 0px) scale(1);
    }

    33% {
      transform: translate(30px, -50px) scale(1.1);
    }

    66% {
      transform: translate(-20px, 20px) scale(0.9);
    }

    100% {
      transform: translate(0px, 0px) scale(1);
    }
  }
}

:root {
  --bg: #050505;
  --surface: #0f0f0f;
  --accent: #ff3d00;
  --secondary: #888888;
  --text: #ffffff;
  --text-dim: rgba(255, 255, 255, 0.5);
  --border: rgba(255, 255, 255, 0.1);
}

body {
  background-color: var(--color-bg);
  color: var(--color-text);
  overflow-x: hidden;
  transition: background-color 0s ease, color 0.5s ease;
}

/* Use smooth transition only after first load */
body.ready {
  transition: background-color 0.8s cubic-bezier(0.4, 0, 0.2, 1), color 0.5s ease;
}

/* --------------------------------------------------------------------------
 * 4. Noise Texture Overlay
 * --------------------------------------------------------------------------
 * A fixed, full-viewport SVG noise pattern layered on top of everything
 * (pointer-events: none) to give the page a subtle film-grain look.
 * -------------------------------------------------------------------------- */
.noise-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 50;
  opacity: 0.06;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.6' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

/* --------------------------------------------------------------------------
 * 5. Custom Cursor
 * --------------------------------------------------------------------------
 * A small accent-coloured dot that smoothly follows the mouse pointer.
 * When hovering over interactive elements it expands into an organic blob
 * shape using mix-blend-mode for a visually striking inversion effect.
 * -------------------------------------------------------------------------- */
.custom-cursor {
  position: fixed;
  top: 0;
  left: 0;
  width: 12px;
  height: 12px;
  background-color: var(--color-accent);
  border-radius: 50%;
  pointer-events: none;
  z-index: 9999;
  transform: translate(-50%, -50%);
  transition:
    width 0.3s cubic-bezier(0.16, 1, 0.3, 1),
    height 0.3s cubic-bezier(0.16, 1, 0.3, 1),
    background-color 0.3s;
  mix-blend-mode: exclusion;
}

/* Expanded cursor state — triggered by adding `.hovered` class */
.custom-cursor.cursor-hovered {
  width: 60px;
  height: 60px;
  background-color: #ffffff;
  border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
  mix-blend-mode: difference;
}

/* "VIEW" cursor — shown over project images (Phase 4A) */
.custom-cursor.cursor-view {
  width: 80px;
  height: 80px;
  background-color: rgba(255, 61, 0, 0.15);
  border: 1px solid rgba(255, 61, 0, 0.4);
  border-radius: 50%;
  backdrop-filter: blur(4px);
  mix-blend-mode: normal;
}

/* Lab card cursor — pulsing ring (Phase 4A) */
.custom-cursor.cursor-lab {
  width: 50px;
  height: 50px;
  background-color: transparent;
  border: 2px solid rgba(255, 61, 0, 0.5);
  border-radius: 50%;
  animation: cursor-pulse 1s ease-in-out infinite;
  mix-blend-mode: normal;
}

@keyframes cursor-pulse {

  0%,
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }

  50% {
    transform: translate(-50%, -50%) scale(1.3);
    opacity: 0.5;
  }
}

/* --------------------------------------------------------------------------
 * 6. Lenis Smooth-Scroll Overrides
 * -------------------------------------------------------------------------- */
html.lenis {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto;
}

.lenis.lenis-stopped {
  overflow: hidden;
}

/* --------------------------------------------------------------------------
 * 7. Film Card
 * --------------------------------------------------------------------------
 * Polaroid / film-still aesthetic for project cards — dark background with
 * a strong box-shadow and a faint border to pop against the dark page.
 * -------------------------------------------------------------------------- */
.film-card {
  background: #000;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
  transition: transform 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* --------------------------------------------------------------------------
 * 8. Text Outline Utility
 * --------------------------------------------------------------------------
 * Renders text as a transparent-fill stroke outline.
 * -------------------------------------------------------------------------- */
.text-outline {
  -webkit-text-stroke: 1px rgba(255, 255, 255, 0.3);
  color: transparent;
}

/* --------------------------------------------------------------------------
 * 9. Scrollbar — Hidden
 * -------------------------------------------------------------------------- */
::-webkit-scrollbar {
  width: 0px;
  background: transparent;
}

/* --------------------------------------------------------------------------
 * 10. Menu Link Hover Effect
 * --------------------------------------------------------------------------
 * On hover the clean font text slides up and a "Rock Salt" handwritten
 * duplicate (pulled from `data-text`) slides in from below with an accent
 * colour and a slight rotation — reinforcing the "distortion" brand.
 * -------------------------------------------------------------------------- */
.menu-link-hover {
  position: relative;
  overflow: hidden;
  padding: 0.2em 0;
}

.menu-link-hover::after {
  content: attr(data-text);
  position: absolute;
  top: 100%;
  left: 0;
  color: #ff3d00;
  transition: top 0.4s cubic-bezier(0.16, 1, 0.3, 1);
  font-family: "Rock Salt", cursive;
  /* Scale down because Rock Salt renders much larger than Inter */
  font-size: 0.6em;
  transform: rotate(-2deg);
  line-height: 1.5;
}

.menu-link-hover:hover::after {
  top: 0;
}

.menu-link-hover span {
  display: block;
  transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

.menu-link-hover:hover span {
  transform: translateY(-100%);
}

/* --------------------------------------------------------------------------
 * 11. Loader Clip-Path
 * --------------------------------------------------------------------------
 * Ensures the loader covers the full viewport before animating away.
 * -------------------------------------------------------------------------- */
#loader {
  clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
}

/* --------------------------------------------------------------------------
 * 12. Glitch Text Effect (Phase 1B)
 * --------------------------------------------------------------------------
 * A CSS-only glitch animation on hover. Two pseudo-elements duplicate the
 * text (from data-text attr), each clipped to a different vertical slice
 * and shifted horizontally with opposite offsets + accent colour tint.
 * -------------------------------------------------------------------------- */
.glitch-text {
  position: relative;
}

.glitch-text::before,
.glitch-text::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
}

.glitch-text:hover::before,
.glitch-text:hover::after {
  opacity: 0.8;
  animation: glitch-shift 0.3s steps(2) infinite;
}

.glitch-text::before {
  color: #ff3d00;
  clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
}

.glitch-text::after {
  color: #00d4ff;
  clip-path: polygon(0 55%, 100% 55%, 100% 100%, 0 100%);
}

@keyframes glitch-shift {
  0% {
    transform: translate(0);
  }

  25% {
    transform: translate(-3px, 1px);
  }

  50% {
    transform: translate(3px, -1px);
  }

  75% {
    transform: translate(-2px, -1px);
  }

  100% {
    transform: translate(2px, 1px);
  }
}

/* --------------------------------------------------------------------------
 * 13. Hero Gradient Fade (Phase 1C)
 * --------------------------------------------------------------------------
 * Fades the bottom of the hero section into the page background.
 * Overridden in light mode below.
 * -------------------------------------------------------------------------- */
.hero-fade {
  background: linear-gradient(to bottom,
      transparent 0%,
      var(--color-bg) 100%);
  opacity: 0.95;
}

/* --------------------------------------------------------------------------
 * 14. Skills Marquee Animation (Phase 3C)
 * -------------------------------------------------------------------------- */
.skills-marquee {
  animation: marquee-scroll 20s linear infinite;
}

.skills-marquee:hover {
  animation-play-state: paused;
}

@keyframes marquee-scroll {
  0% {
    transform: translateX(0);
  }

  100% {
    transform: translateX(-50%);
  }
}

/* ==========================================================================
 * 15. Mood Theme Overrides
 * ========================================================================== */

/* Midnight — Deep blue-black */
[data-mood="midnight"] {
  --bg: #02040a;
  --surface: #0a1224;
  --accent: #00d4ff;
  --secondary: #60a5fa;
  --text: #e0f2fe;
  --text-dim: rgba(224, 242, 254, 0.5);
  --border: rgba(96, 165, 250, 0.1);
}

/* Ember — Warm dark */
[data-mood="ember"] {
  --bg: #0a0500;
  --surface: #1a0a00;
  --accent: #ff9500;
  --secondary: #f59e0b;
  --text: #fffbeb;
  --text-dim: rgba(255, 251, 235, 0.5);
  --border: rgba(245, 158, 11, 0.1);
}

/* Toxic — Radioactive Neon */
[data-mood="toxic"] {
  --bg: #050a00;
  --surface: #0f1a00;
  --accent: #ccff00;
  --secondary: #a3e635;
  --text: #f7fee7;
  --text-dim: rgba(247, 254, 231, 0.5);
  --border: rgba(163, 230, 53, 0.1);
}

/* Ghost — High-Contrast Glitch Light */
[data-mood="ghost"] {
  --bg: #f8f8f8;
  --surface: #ffffff;
  --accent: #ff003c;
  --secondary: #333333;
  --text: #0a0a0a;
  --text-dim: rgba(10, 10, 10, 0.6);
  --border: rgba(0, 0, 0, 0.1);
}

/* Smooth background accent transitions */
.orb {
  transition: background-color 1s ease-in-out, opacity 1s ease-in-out;
}